{{ define "main" }}
<section class="recent-notes">
    {{ $pages := .Pages }}
    {{ if not hugo.IsServer }}
    {{ $pages = where $pages "Draft" false }}
    {{ end }}
    {{ $paginator := .Paginate $pages }}
    {{ $lastYear := "" }}
    {{ range $paginator.Pages }}
        {{ $currentYear := .Date.Format "2006" }}
        {{ if ne $currentYear $lastYear }}
            <h2 class="section-label-medium">{{ $currentYear }}</h2>
            {{ $lastYear = $currentYear }}
        {{ end }}
        <div class="note-item">
            <a href="{{ .RelPermalink }}">
                <span class="note-date">{{ .Date.Format "Jan · 02" }}</span>
                <span class="note-title-link">{{ .Title }}</span>
            </a>
        </div>
    {{ end }}
</section>

{{ if or $paginator.HasPrev $paginator.HasNext }}
<nav class="pagination">
    {{ if $paginator.HasPrev }}
    <a href="{{ $paginator.Prev.URL }}" class="pagination-prev"><span aria-hidden="true">←</span> Newer</a>
    {{ end }}
    {{ if $paginator.HasNext }}
    <a href="{{ $paginator.Next.URL }}" class="pagination-next">Older <span aria-hidden="true">→</span></a>
    {{ end }}
</nav>
{{ end }}
{{ end }}
