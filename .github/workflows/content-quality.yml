name: Content Quality

on:
  # Run on PRs to catch issues before merge
  pull_request:
    paths:
      - 'content/**/*.md'
      - '*.md'
      - 'go.mod'
      - 'go.sum'

  # Run on push to master to validate all content
  push:
    branches:
      - master
    paths:
      - 'content/**/*.md'
      - '*.md'
      - 'go.mod'
      - 'go.sum'

  # Run weekly on Mondays to catch link rot
  schedule:
    - cron: '0 9 * * 1'

  # Allow manual triggering
  workflow_dispatch:

jobs:
  link-check:
    uses: shawnyeager/shared-workflows/.github/workflows/hugo-link-checker.yml@master
    permissions:
      issues: write

  markdown-lint:
    uses: shawnyeager/shared-workflows/.github/workflows/hugo-markdown-linter.yml@master
    with:
      content_path: 'content/notes/'

  content-validator:
    uses: shawnyeager/shared-workflows/.github/workflows/hugo-content-validator.yml@master
    with:
      content_path: 'content/notes'
      content_type: 'notes'
      require_description: false

  module-validator:
    uses: shawnyeager/shared-workflows/.github/workflows/hugo-module-validator.yml@master
    with:
      module_path: 'github.com/shawnyeager/tangerine-theme'

  image-validator:
    uses: shawnyeager/shared-workflows/.github/workflows/hugo-image-validator.yml@master
    with:
      content_path: 'content/'
